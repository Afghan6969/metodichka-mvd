"use client"

import type React from "react"
import { useState } from "react"
import { Card, CardContent } from "@/components/ui/card"
import { Collapsible, CollapsibleContent, CollapsibleTrigger } from "@/components/ui/collapsible"
import { ChevronDown, ChevronRight, GraduationCap } from "lucide-react"
import { CopyButton } from "@/components/copy-button"
import { SearchBar } from "@/components/search-bar"

interface Lecture {
  id: string
  title: string
  icon: React.ComponentType<any>
  content: string
  category: "basic" | "advanced" | "special"
}

export function LecturesPage() {
  const [openLectures, setOpenLectures] = useState<{ [key: string]: boolean }>({})
  const [searchQuery, setSearchQuery] = useState("")

  const toggleLecture = (lectureId: string) => {
    setOpenLectures((prev) => ({
      ...prev,
      [lectureId]: !prev[lectureId],
    }))
  }

  const lectures: Lecture[] = [
    {
      id: "lecture1",
      title: "Лекция 1. Задержание",
      icon: GraduationCap,
      category: "basic",
      content: `say Добрый день. Сегодняшняя тема лекции — «Задержание». Разберём основания, сроки и порядок действий сотрудников полиции.
say Полиция защищает право каждого на свободу и неприкосновенность. say Без суда задержание не может длиться более трёх часов реального времени.
say Если за 10 минут не удалось посадить нарушителя в КПЗ по объективной причине — он должен быть освобождён.
say Полиция имеет право задерживать подозреваемых в преступлении, скрывшихся от ареста, находящихся в розыске.
say Также задерживают лиц, нарушивших охрану объекта, либо скрывшихся от административного ареста.
say Задержанию подлежат лица с признаками психических расстройств, создающие опасность для себя или других.
say Можно задерживать лиц, передавших руль пьяному, а также водителей в состоянии опьянения или если авто в розыске.
say При задержании сотрудник обязан сообщить причину задержания — в двух-трёх словах с указанием статьи.
say Срок задержания отсчитывается с момента ограничения свободы, то есть с момента, когда человека остановили.
say О задержании составляется протокол. Его подписывают сотрудник и задержанный. Копия передаётся конвоиру.
say Если задержанный не может подписать протокол или отказывается, в документе делается соответствующая запись.
say Задержанный должен быть доставлен в отдел полиции как можно быстрее, но не позже 15 минут.
say Исключения возможны, если произошли независимые от сотрудника события: ДТП, нападение, и т.п.
say Спасибо за внимание.`,
    },
    {
      id: "lecture2",
      title: "Лекция 2. Права сотрудников полиции",
      icon: GraduationCap,
      category: "basic",
      content: `say Добрый день. Сегодняшняя лекция — «Права сотрудников полиции».
say Кратко разберём, какие полномочия имеют полицейские при исполнении служебных обязанностей.
say Полиция может требовать от граждан прекратить противоправные действия.
say Право проверять документы граждан при подозрении в нарушении или розыске.
say Патрулировать территории и охранять общественный порядок, выставлять посты.
say Требовать от граждан покинуть место происшествия, если мешают полиции.
say Требовать соблюдать личное пространство — отойти на небольшое расстояние.
say Проводить арест и задержание по закону, сопровождать в отдел полиции.
say Использовать камеры для поиска и отслеживания подозреваемых.
say Производить досмотр лиц и транспорта при задержании или наличии угрозы.
say Изымать запрещённые предметы: оружие, взрывчатые и наркотики.
say ГИБДД проверяет водителей на алкоголь с помощью алкотестера.
say При отказе на проверку — доставить в медучреждение для освидетельствования.
say Признаки нетрезвого водителя: нарушение ПДД, агрессия, неадекватное поведение.
say Останавливать машины, проверять документы, ограничивать движение при необходимости.
say Привлекать граждан к помощи с их согласия и в рамках закона.
say Проникать в жилище или территорию для служебных целей.
say Иметь другие права, если они не вредят обществу и не нарушают закон.
say На этом лекция «Права сотрудников полиции» окончена. Спасибо за внимание. Если есть вопросы — задавайте.`,
    },
    {
      id: "lecture3",
      title: "Лекция 3. Обязанности сотрудников полиции",
      icon: GraduationCap,
      category: "basic",
      content: `say Добрый день. Сегодняшняя лекция — «Обязанности полиции». Рассмотрим основные обязанности сотрудников полиции при исполнении служебных задач.
say Полиция работает строго в соответствии с законом.
say Сотрудник несет ответственность за свои действия и приказы.
say Полицейские обязаны пресекать нарушения и своевременно реагировать на вызовы.
say Общение с гражданами должно быть уважительным и корректным.
say При обращении сотрудник сообщает звание, имя, структуру и цель обращения.
say В некоторых случаях можно не показывать служебное удостоверение.
say Сотрудник должен иметь при себе амуницию по должности и званию.
say Основные средства: наручники, дубинка, бронежилет, тазер, пистолет и автомат или дробовик.
say Полиция участвует в охране и перевозке боеприпасов для МВД.
say Сотрудники обязаны знать и соблюдать ПДД, КоАП, УК и другие законы.
say Правонарушения фиксируются и доказательства хранятся не менее 10 дней.
say Обеспечение безопасности граждан и общественного порядка — главная задача.
say При необходимости полицейские оказывают первую медицинскую помощь.
say Выполняют законные приказы руководства.
say Запрещено вредить авторитету полиции и вести подрывную деятельность.
say Сотрудники сдают экипировку во время перерыва и после смены.
say Обязательно реагируют на вызовы коллег и других структур.
say Докладывают о своей деятельности через рацию.
say Соблюдают субординацию с коллегами.
say При обращении гражданина обязаны принять меры по решению ситуации.
say Руководство обязано оформлять приказы по регламенту.
say При установлении личности снимают аксессуары, закрывающие лицо.
say При наказании указывают статью нарушения и кратко её объясняют.
say Подписывают и вручают копии протоколов участникам ДТП и нарушителям.
say Водят служебный транспорт согласно званию и должности.
say На этом лекция «Обязанности полиции» окончена. Спасибо за внимание. Если есть вопросы — задавайте.`,
    },
    {
      id: "lecture4",
      title: "Лекция 4. Применение физ. силы и огнестрельного оружия",
      icon: GraduationCap,
      category: "advanced",
      content: `say Добрый день. Сегодняшняя лекция — «Применение физической силы, специальных средств и огнестрельного оружия».
say Сотрудник полиции вправе применять силу, спецсредства и оружие согласно закону без ответственности за вред, если действует правильно.
say В нужной обороне и при задержании можно использовать подручные средства самозащиты.
say Перед применением спецсредств нужно предупреждать нарушителя, кроме угрозы жизни.
say Оружие достается только при реальной угрозе и основаниях для применения.
say При попытке забрать оружие сотрудник вправе стрелять на поражение.
say Спецсредства — технические изделия для среднего физического воздействия.
say Силу и спецсредства применяют для пресечения преступлений, отражения нападений, задержания и освобождения заложников.
say Право применять огнестрельное оружие есть при защите жизни, пресечении тяжких преступлений и вооруженном сопротивлении.
say Запрещено стрелять при большом скоплении людей, чтобы избежать жертв.
say Огнестрельное оружие применяется только если спецсредства неэффективны.
say Для остановки транспорта разрешены специальные маневры с минимальным риском.
say Проблесковые маячки и СГУ можно использовать только по служебной необходимости.
say Маячки применяются при дежурстве, оцеплении, спецмероприятиях и охране грузов.
say С включенным СГУ можно отклоняться от ПДД при погонах и неотложных вызовах.
say Доставка в участок и обычное патрулирование не считаются неотложными для использования маячков.
say На этом лекция «Применение силы и оружия» окончена. Вопросы?`,
    },
    {
      id: "lecture5",
      title: "Лекция 5. Запреты сотрудников полиции",
      icon: GraduationCap,
      category: "advanced",
      content: `say Добрый день. Сегодняшняя лекция — «Запреты сотрудников полиции».
say Запрещено использовать служебное положение в личных целях, брать взятки, снимать розыск без причины и возвращать права незаконно.
say Нецензурная брань и оскорбления запрещены, кроме строгих рамок руководства.
say Нельзя игнорировать запросы о помощи.
say Запрещено задерживать железнодорожный транспорт вне конечных остановок и общественный транспорт с пассажирами.
say Запрещено задерживать инкассаторов во время рейса, кроме случаев угрозы жизни граждан.
say Запрещены нарушение строевой подготовки и применение пыток, насилия или унижений.
say Запрещено ограничивать права граждан без оснований.
say Нельзя подстрекать к противоправным действиям, а внедрённые агенты должны действовать по плану.
say Запрещено несанкционированно нарушать границы воинских частей.
say Пит-манёвр запрещён для прицепов грузовиков.
say Неуполномоченным запрещено массовое задержание преступных группировок, разрешено лишь малочисленных лиц.
say Запрещено продолжать погоню, если преступник скрылся на своей базе.
say Запрещены облавы и проверки на территории базы и возле неё.
say Запрещено ставить блокпосты и блокировать пути у базы группировок.
say На этом лекция «Запреты сотрудников полиции» окончена. Вопросы?`,
    },
    {
      id: "lecture6",
      title: "Лекция 6. График работы (МСК) и обязанности сотрудников",
      icon: GraduationCap,
      category: "advanced",
      content: `say Добрый день. Сегодняшняя лекция — «График работы (МСК) и обязанности сотрудников».
say Государственные фракции работают по следующему графику в будние дни с 9:00 до 21:00 с перерывами на обед с 12:00 до 13:00 и на ужин с 16:00 до 17:00.
say В выходные дни смена длится с 11:00 до 19:00 с теми же перерывами на обед и ужин.
say В праздничные дни график сокращён — с 12:00 до 18:00, с обеденным перерывом с 15:00 до 16:00.
say Сотрудники обязаны выполнять свои служебные обязанности и пресекать нарушения в рабочее время.
say Во время перерывов сотрудник может остаться на смене и продолжать работу, но запрещено устраиваться на другую работу в этот период.
say После окончания смены сотрудник имеет право заниматься другой трудовой деятельностью.
say На этом лекция «График работы и обязанности сотрудников» окончена. Вопросы?`,
    },
    {
      id: "lecture7",
      title: "Лекция 7. Погоня",
      icon: GraduationCap,
      category: "special",
      content: `say Лекция на тему: «Погоня».
say Начало погони — это всегда напряжённая и ответственная ситуация, требующая максимальной концентрации и чёткого соблюдения процедур.
say Первым действием обязательно включите световые и звуковые сигналы — специальные громкоговорители и маячки, чтобы оповестить say всех участников дорожного движения о вашем преследовании.
say Далее необходимо через мегафон дать чёткое и громкое предупреждение водителю преследуемого транспортного средства
say о необходимости немедленно остановиться.
say Интервал между предупреждениями должен составлять не менее пяти секунд, чтобы водитель успевал их воспринимать и реагировать.
say Важно помнить, что агрессивные манёвры, такие как обгон, езда перед преследуемым автомобилем или сбоку от него, могут привести к аварийным ситуациям и ухудшению контроля над ситуацией.
say Обгон разрешается только в строго определённых случаях:
say Во-первых, если вы выполняете специальный манёвр для блокировки или остановки преследуемого транспортного средства.
say Во-вторых, если нужно перекрыть дорогу преследуемому автомобилю для предотвращения дальнейшего движения.
say Все действия должны проводиться максимально аккуратно, с учётом безопасности как сотрудников, так и граждан на дороге.
say Кроме того, во время погони необходимо постоянно оценивать обстановку, учитывая состояние дорожного покрытия, погодные условия и плотность движения.
say Если ситуация выходит из-под контроля, лучше временно прекратить погоню и передать информацию другим подразделениям для задержания нарушителя.
say Помните, что главная задача — не только остановить нарушителя, но и сохранить жизни и здоровье всех участников дорожного движения.
say На этом лекция на тему «Погоня» завершена.`,
    },
    {
      id: "lecture8",
      title: "Лекция 8. Тактика",
      icon: GraduationCap,
      category: "special",
      content: `say Лекция на тему: «Тактика действий сотрудников МВД».
say В работе сотрудников МВД важно использовать все имеющиеся преимущества — численность, техническое оснащение, опыт.
say На месте происшествия продумывайте несколько вариантов развития событий и выбирайте самый эффективный.
say Если возможно, разделяйтесь на группы, чтобы параллельно выполнять разные задачи и снизить риски.
say Не идите напролом, используйте приёмы дезориентации и психологического воздействия, чтобы сбить преступника с толку.
say Помните, что в распоряжении МВД есть поддержка с воздуха — вертолёты для наблюдения и быстрого реагирования.
say Координация с воздушной поддержкой повышает эффективность операции и безопасность сотрудников.
say В критических ситуациях слаженная работа и чёткое выполнение тактики помогают быстрее и безопаснее решать задачи.
say На этом лекция по тактике действий сотрудников МВД завершена.`,
    },
    {
      id: "lecture9",
      title: "Лекция 9. Колонна",
      icon: GraduationCap,
      category: "special",
      content: `say Лекция на тему: "Колонна"
say Колонна — группа ТС, движущихся вместе по правилам для безопасности и слаженности действий всех участников.
say При движении в колонне запрещено превышать скорость, чтобы избежать аварий и сохранить порядок.
say Звуковой сигнал разрешён только по команде командира колонны, чтобы не мешать другим участникам движения.
say В колонне обязательно соблюдение дистанции, без резких перестроений и обгонов внутри группы.
say Манёвры — перестроения, остановки и ускорения — выполняются только по команде руководителя колонны.
say Соблюдение всех правил колонны предотвращает аварии и обеспечивает чёткое взаимодействие участников.
say Лекция на тему "Колонна" окончена.`,
    },
    {
      id: "lecture10",
      title: "Лекция 10. Субординация",
      icon: GraduationCap,
      category: "special",
      content: `say Тема лекции: "Субординация".
say Субординация — это обязательное соблюдение правил взаимоотношений между сотрудниками полиции.
say Согласно пункту 2.18, сотрудники обязаны соблюдать субординацию с коллегами.
say Исключение составляют небольшие дружественные компании, где допускается более свободное общение.
say У нас нет слов "Сэр" или "Мэм" — только "Товарищ звание".
say Нет слов "Да" и "Нет" — только "Так точно!" и "Никак нет!".
say Нет слов "Хорошо" и "Ладно" — только "Есть!".
say В дружественной компании можно говорить свободнее, но уважение к званиям обязательно.
say Соблюдение субординации помогает поддерживать дисциплину и порядок.
say На этом лекция на тему "Субординация" закончена.`,
    },
    {
      id: "lecture11",
      title: "Лекция 11. Этика поведения на службе",
      icon: GraduationCap,
      category: "special",
      content: `say Лекция на тему: "Этика поведения на службе".
say Сотрудник полиции — это представитель закона, от которого зависит безопасность граждан и общества в целом.
say В общении с населением важно проявлять уважение, терпимость и корректность, независимо от обстоятельств.
say Проявления агрессии, грубости, коррупции и пренебрежения законом недопустимы и подрывают доверие к ведомству.
say Соблюдайте конфиденциальность информации, полученной во время службы, и не разглашайте её без необходимости.
say Ваше поведение формирует общественное мнение о полиции, поэтому важно поддерживать высокий моральный и профессиональный уровень.
say Помните, что и в нерабочее время вы остаетесь представителем закона, и ваши действия должны соответствовать этому статусу.
say Постоянно совершенствуйте свои знания, навыки и этические нормы, чтобы лучше выполнять служебные обязанности.
say Стремитесь быть примером для коллег и граждан, проявляйте честность, справедливость и ответственность в работе.
say На этом лекция на тему "Этика поведения на службе" закончена.`,
    },
    {
      id: "lecture12",
      title: "Лекция 12. Работа с документами и отчетностью",
      icon: GraduationCap,
      category: "special",
      content: `say Лекция на тему: "Работа с документами и отчетностью".
say Правильное оформление документов — залог успешной и прозрачной работы полиции.
say Каждый акт, протокол или рапорт должен быть составлен точно, без ошибок и искажений.
say При заполнении документов используйте официальный стиль и четко излагайте факты без личных оценок.
say Соблюдайте сроки подачи отчетов, так как это влияет на оперативность принятия решений руководством.
say Важно хранить документы в порядке, обеспечивать их сохранность и доступность при проверках.
say Нарушение правил оформления может привести к недействительности документов и срыву расследований.
say При работе с конфиденциальной информацией соблюдайте меры безопасности и не передавайте данные третьим лицам.
say Регулярно обучайтесь новым требованиям к документации и используйте электронные системы для повышения эффективности.
say На этом лекция на тему "Работа с документами и отчетностью" закончена.`,
    },
    {
      id: "lecture13",
      title: "Лекция 13. Первая медицинская помощь",
      icon: GraduationCap,
      category: "special",
      content: `say Лекция на тему: "Первая медицинская помощь".
say В экстренных ситуациях от ваших действий может зависеть жизнь пострадавшего.
say Первым делом оценивайте обстановку и обеспечьте безопасность для себя и пострадавшего.
say Проверьте сознание пострадавшего — громко позовите, аккуратно потрясите за плечо.
say Если человек не дышит, немедленно приступайте к искусственному дыханию и непрямому массажу сердца.
say При кровотечениях наложите жгут или тугую повязку выше раны для остановки крови.
say Не перемещайте пострадавшего без необходимости, чтобы не усугубить травмы.
say При переломах обеспечьте иммобилизацию конечности с помощью подручных средств.
say Вызовите скорую помощь и четко сообщите о состоянии и местонахождении пострадавшего.
say Обучайтесь навыкам первой помощи регулярно, это поможет сохранить жизнь в критический момент.
say На этом лекция на тему "Первая медицинская помощь" закончена.`,
    },
  ]

  const getItemIcon = (IconComponent: React.ComponentType<any>) => {
    return <IconComponent className="h-5 w-5" />
  }

  const filteredLectures = lectures.filter(
    (lecture) =>
      lecture.title.toLowerCase().includes(searchQuery.toLowerCase()) ||
      lecture.content.toLowerCase().includes(searchQuery.toLowerCase()),
  )

  return (
    <div className="space-y-6">
      <div className="flex items-center gap-3 mb-8">
        <div className="w-12 h-12 bg-primary rounded-full flex items-center justify-center">
          <GraduationCap className="h-6 w-6 text-primary-foreground" />
        </div>
        <div>
          <h1 className="text-3xl font-bold text-foreground">Лекции для сотрудников МВД</h1>
          <p className="text-muted-foreground">Теоретическая подготовка и изучение регламента</p>
        </div>
      </div>

      <div className="mb-6">
        <SearchBar onSearch={setSearchQuery} placeholder="Поиск лекций..." />
      </div>

      {/* Все лекции в одном списке */}
      <div className="space-y-4">
        {filteredLectures.map((lecture) => (
          <Card key={lecture.id} className="border-border bg-card/50">
            <CardContent className="p-0">
              <div className="flex items-start gap-4 p-4">
                <div className="text-primary mt-1">{getItemIcon(lecture.icon)}</div>
                <div className="flex-1">
                  <Collapsible open={openLectures[lecture.id]} onOpenChange={() => toggleLecture(lecture.id)}>
                    <CollapsibleTrigger className="w-full text-left">
                      <div className="flex items-center justify-between">
                        <div className="flex items-center gap-2 mb-2">
                          <h3 className="font-semibold text-foreground text-sm">{lecture.title}</h3>
                        </div>
                        {openLectures[lecture.id] ? (
                          <ChevronDown className="h-4 w-4 text-muted-foreground" />
                        ) : (
                          <ChevronRight className="h-4 w-4 text-muted-foreground" />
                        )}
                      </div>
                    </CollapsibleTrigger>
                    <CollapsibleContent>
                      <div className="mt-3 bg-muted/50 p-4 rounded-lg border border-border">
                        {lecture.content.split("\n").map((line, index) => (
                          <div key={index} className="flex items-start gap-2 mb-2 last:mb-0">
                            <div className="flex-1 font-mono text-sm text-foreground">{line}</div>
                            {line.trim().startsWith("say ") && (
                              <CopyButton text={line.trim()} className="flex-shrink-0 mt-0.5" />
                            )}
                          </div>
                        ))}
                      </div>
                    </CollapsibleContent>
                  </Collapsible>
                </div>
              </div>
            </CardContent>
          </Card>
        ))}
      </div>

      {filteredLectures.length === 0 && searchQuery && (
        <div className="text-center py-12">
          <p className="text-muted-foreground">Лекции не найдены по запросу "{searchQuery}"</p>
        </div>
      )}

      <footer className="mt-16 pt-8 border-t border-border">
        <div className="text-center">
          <p className="text-sm text-muted-foreground">
            Разработано{" "}
            <a
              href="https://vk.com/id503251431"
              target="_blank"
              rel="noopener noreferrer"
              className="text-primary hover:text-primary/80 font-medium transition-colors"
            >
              Poseidon_Wagner
            </a>
          </p>
        </div>
      </footer>
    </div>
  )
}
