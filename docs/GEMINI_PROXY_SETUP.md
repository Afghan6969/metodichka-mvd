# –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –¥–ª—è Gemini API

## –ß—Ç–æ —ç—Ç–æ?

–ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Gemini API –∏–∑ —Å—Ç—Ä–∞–Ω, –≥–¥–µ –æ–Ω –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞–ø—Ä—è–º—É—é. –ó–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ –≤–∞—à —Å–µ—Ä–≤–µ—Ä Next.js, –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ API.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –í–∞—à —Å–µ—Ä–≤–µ—Ä (Next.js) ‚Üí Gemini API ‚Üí –í–∞—à —Å–µ—Ä–≤–µ—Ä ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ù–µ –Ω—É–∂–µ–Ω VPN –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ API –∫–ª—é—á –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

## –§–∞–π–ª—ã

### 1. –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä
**–§–∞–π–ª:** `app/api/gemini-proxy/route.ts`

–°–µ—Ä–≤–µ—Ä–Ω—ã–π endpoint, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ Gemini API.

### 2. –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —É—Ç–∏–ª–∏—Ç–∞
**–§–∞–π–ª:** `lib/gemini-api.ts`

–û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∫—Å–∏ –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ API.

## –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–ü—Ä–æ–∫—Å–∏ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä:

```bash
npm run dev
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–∫—Å–∏ –Ω–∞ `http://localhost:3000/api/gemini-proxy`

## –î–µ–ø–ª–æ–π –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥

### Vercel (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [vercel.com](https://vercel.com)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤–∞—à GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. –ù–∞–∂–º–∏—Ç–µ "Deploy"
4. –ì–æ—Ç–æ–≤–æ! –ü—Ä–æ–∫—Å–∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω:**
- ‚úÖ Unlimited requests
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π HTTPS
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–π CDN

### Netlify

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [netlify.com](https://netlify.com)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
3. Build settings:
   - Build command: `npm run build`
   - Publish directory: `.next`
4. Deploy

### Railway

1. –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ [railway.app](https://railway.app)
2. "New Project" ‚Üí "Deploy from GitHub"
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
4. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç Next.js

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –ß—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ

- API –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (localStorage)
- –ü—Ä–æ–∫—Å–∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–ª—é—á–∏
- –ü—Ä–æ–∫—Å–∏ –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- HTTPS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ (–Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)

### ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ API –∫–ª—é—á–∏** –≤ Git
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ Vercel/Netlify)
3. **–î–æ–±–∞–≤—å—Ç–µ rate limiting** –µ—Å–ª–∏ –æ–∂–∏–¥–∞–µ—Ç–µ –º–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## Rate Limiting (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤, –¥–æ–±–∞–≤—å—Ç–µ –≤ `route.ts`:

```typescript
// –ü—Ä–æ—Å—Ç–æ–π in-memory rate limiter
const requests = new Map<string, number[]>()

function checkRateLimit(ip: string): boolean {
  const now = Date.now()
  const userRequests = requests.get(ip) || []
  
  // –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–Ω—É—Ç—É
  const recentRequests = userRequests.filter(time => now - time < 60000)
  
  if (recentRequests.length >= 10) { // 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
    return false
  }
  
  recentRequests.push(now)
  requests.set(ip, recentRequests)
  return true
}
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Vercel Analytics

Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
- –û—à–∏–±–∫–∏

–î–æ—Å—Ç—É–ø–Ω–æ –≤ –¥–∞—à–±–æ—Ä–¥–µ –ø—Ä–æ–µ–∫—Ç–∞.

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏ –≤ `route.ts`:

```typescript
console.log('–ü—Ä–æ–∫—Å–∏ –∑–∞–ø—Ä–æ—Å:', {
  timestamp: new Date().toISOString(),
  promptLength: prompt.length
})
```

## Troubleshooting

### –û—à–∏–±–∫–∞: "API –∫–ª—é—á –Ω–µ —É–∫–∞–∑–∞–Ω"

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–ª–∏–µ–Ω—Ç –Ω–µ –æ—Ç–ø—Ä–∞–≤–∏–ª API –∫–ª—é—á

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–ª—é—á —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ localStorage

### –û—à–∏–±–∫–∞: "–û—à–∏–±–∫–∞ API: 404"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω–∞—è –º–æ–¥–µ–ª—å –∏–ª–∏ endpoint

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –≤ `route.ts` (—Å–µ–π—á–∞—Å `gemini-2.0-flash`)

### –û—à–∏–±–∫–∞: "CORS"

**–ü—Ä–∏—á–∏–Ω–∞:** –ë—Ä–∞—É–∑–µ—Ä –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å

**–†–µ—à–µ–Ω–∏–µ:** 
- –õ–æ–∫–∞–ª—å–Ω–æ: —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ `OPTIONS` handler
- –ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ: Vercel/Netlify –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

**–ü—Ä–∏—á–∏–Ω–∞:** –•–æ–ª–æ–¥–Ω—ã–π —Å—Ç–∞—Ä—Ç serverless —Ñ—É–Ω–∫—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:**
- Vercel Pro: –ú–µ–Ω—å—à–µ —Ö–æ–ª–æ–¥–Ω—ã—Ö —Å—Ç–∞—Ä—Ç–æ–≤
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Railway (–≤—Å–µ–≥–¥–∞ –∞–∫—Ç–∏–≤–Ω—ã–π —Å–µ—Ä–≤–µ—Ä)

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –ø—Ä–æ–∫—Å–∏

–ï—Å–ª–∏ –ø—Ä–æ–∫—Å–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –º–æ–∂–Ω–æ:

1. **VPS —Å VPN** - –∞—Ä–µ–Ω–¥–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä –≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–π —Å—Ç—Ä–∞–Ω–µ
2. **Cloudflare Workers** - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π edge computing
3. **–î—Ä—É–≥–æ–π AI API** - Hugging Face, Together AI

## –°—Ç–æ–∏–º–æ—Å—Ç—å

### –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ª–∏–º–∏—Ç—ã

**Vercel:**
- 100 GB bandwidth/–º–µ—Å—è—Ü
- 100 —á–∞—Å–æ–≤ serverless/–º–µ—Å—è—Ü
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è ~10,000 –∑–∞–ø—Ä–æ—Å–æ–≤

**Netlify:**
- 100 GB bandwidth/–º–µ—Å—è—Ü
- 125,000 serverless requests/–º–µ—Å—è—Ü

**Railway:**
- $5 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤/–º–µ—Å—è—Ü
- ~500 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã

### Gemini API

- –ë–µ—Å–ø–ª–∞—Ç–Ω–æ: 15 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
- –ü–ª–∞—Ç–Ω–æ: –æ—Ç $0.00025 –∑–∞ –∑–∞–ø—Ä–æ—Å

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å Gemini, –∏–∑–º–µ–Ω–∏—Ç–µ –≤ `route.ts`:

```typescript
const response = await fetch(
  'https://generativelanguage.googleapis.com/v1beta/models/–ù–ê–ó–í–ê–ù–ò–ï_–ú–û–î–ï–õ–ò:generateContent',
  // ...
)
```

–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏:
- `gemini-2.0-flash` (—Ç–µ–∫—É—â–∞—è, –±—ã—Å—Ç—Ä–∞—è)
- `gemini-1.5-pro` (–±–æ–ª–µ–µ –º–æ—â–Ω–∞—è)
- `gemini-pro` (–±–∞–∑–æ–≤–∞—è)

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. ‚úÖ Dev —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (`npm run dev`)
2. ‚úÖ API –∫–ª—é—á –≤–∞–ª–∏–¥–µ–Ω
3. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
4. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —Å–µ—Ä–≤–µ—Ä–∞

## Changelog

### v1.0.0
- ‚ú® –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞
- üîí –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ API –∫–ª—é—á–µ–π
- üåç –û–±—Ö–æ–¥ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- ‚ö° –ü–æ–¥–¥–µ—Ä–∂–∫–∞ gemini-2.0-flash
